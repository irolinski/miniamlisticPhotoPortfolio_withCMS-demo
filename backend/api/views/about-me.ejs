<% layout('layouts/boilerplate') %>

<div class="container mx-auto col-10 col-md-6 px-12">
  <main class="mt-5">
    <h1>About me</h1>
    <div class="mx-auto">
      <form
        action="/about-me?_method=PUT"
        class="needs-validation"
        id="about_me-form"
        method="POST"
        novalidate
      >
        <div class="my-3 py-5 row" id="form-input-div">
        <% if (abt.profile_picture_url !== undefined) { %>
          <div class="col-12 pt-3">
            <label for="profile_picture_url">Profile picture URL:</label>
            <input
              name="profile_picture_url"
              type="url"
              class="form-control needs-validation"
              value="<%=abt.profile_picture_url%>"
              required
            />
            <% } else { %>
                        <div class="col-12 pt-3">
            <label for="profile_picture_url">Profile picture URL:</label>
            <input
              name="profile_picture_url"
              type="url"
              class="form-control needs-validation"
              required
            />
           <% } %>
          </div>
          <div class="col-12 pt-3">
            <label for="description">Description:</label>
            <textarea
              rows="8"
              cols="25"
              name="description"
              class="form-control needs-validation"
              type="text"
              rows="4"
              cols="25"
              required
              maxlength="512"
            >
<%=abt.description%></textarea
            >
            <div class="form-text">
              This will be the description visible on your 'about me' page. It
              would be good if it was short and concise. It will look good if
              there are double line breaks in between sentences.
            </div>
          </div>
          <div class="row col-12 pt-3">
            <div class="col-6">
              <label for="phone_num">Phone number:</label>
              <input
                name="phone_num"
                class="form-control"
                type="tel"
                value="<%=abt.phone_num%>"
                maxlength="15"
              />
            </div>
            <div class="col-6">
              <label for="e_mail">Contact e-mail:</label>
              <input
                name="e_mail"
                class="form-control"
                type="email"
                value="<%=abt.e_mail%>"
                maxlength="50"
              />
            </div>
            <div class="col-8 pt-3">
              <label for="instagram_url">Instagram profile URL:</label>
              <input
                name="instagram_url"
                class="form-control"
                type="url"
                value="<%=abt.instagram_url%>"
                maxlength="100"
              />
            </div>
          </div>
        </div>
      </form>
      <div class="mx-auto">
        <button
          type="submit"
          form="about_me-form"
          class="btn btn-outline-primary float-end"
        >
          Submit
        </button>
      </div>
    </div>
  </main>
</div>

<script>
  (() => {
    "use strict";

    // Fetch all the forms we want to apply custom Bootstrap validation styles to
    const forms = document.querySelectorAll(".needs-validation");

    // Loop over them and prevent submission
    Array.from(forms).forEach((form) => {
      form.addEventListener(
        "submit",
        (event) => {
          if (!form.checkValidity()) {
            event.preventDefault();
            event.stopPropagation();
          }

          form.classList.add("was-validated");
        },
        false
      );
    });
  })();
</script>
